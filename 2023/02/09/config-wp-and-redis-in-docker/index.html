<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Configure Wordpress and Redis in Docker</title><link rel="canonical" href="https://blog.nvimer.org/2023/02/09/config-wp-and-redis-in-docker/"><meta name="description" content="ForewordThe station has been transferred, and the original 4g small device has been transferred to the current 32g single-use top surface. php+redis+m"><meta name="keywords" content="jinzhongjia,jin"><meta name="author" content="Jin Zhongjia"><meta property="og:site_name" content="Jin&#39;s blog"><meta property="og:type" content="article"><meta property="og:title" content="Configure Wordpress and Redis in Docker"><meta property="og:description" content="ForewordThe station has been transferred, and the original 4g small device has been transferred to the current 32g single-use top surface. php+redis+m"><meta property="og:url" content="https://blog.nvimer.org/2023/02/09/config-wp-and-redis-in-docker/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Configure Wordpress and Redis in Docker"><meta name="twitter:description" content="ForewordThe station has been transferred, and the original 4g small device has been transferred to the current 32g single-use top surface. php+redis+m"><meta name="twitter:url" content="https://blog.nvimer.org/2023/02/09/config-wp-and-redis-in-docker/"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/skeleton.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/prism-dark.css"><link rel="stylesheet" href="/css/prism-line-numbers.css"><link rel="stylesheet" href="/css/katex.min.css"><link rel="icon" type="image/png" href="/images/favicon.ico"><style>a:not(.icon){text-decoration-color:#0fa0ce;background-image:linear-gradient(to bottom,rgba(0,0,0,0) 50%,#0fa0ce 50%)}blockquote{border-left:8px solid #0fa0ce}.nanobar .bar{background:#0fa0ce}.button.button-primary:focus,.button.button-primary:hover,button.button-primary:focus,button.button-primary:hover,input[type=button].button-primary:focus,input[type=button].button-primary:hover,input[type=reset].button-primary:focus,input[type=reset].button-primary:hover,input[type=submit].button-primary:focus,input[type=submit].button-primary:hover{background-color:#0fa0ce;border-color:#0fa0ce}input[type=email]:focus,input[type=number]:focus,input[type=password]:focus,input[type=search]:focus,input[type=tel]:focus,input[type=text]:focus,input[type=url]:focus,select:focus,textarea:focus{border:1px solid #0fa0ce}</style><script src="/js/pic.min.js" defer></script><script src="/js/search.min.js" defer></script><script src="/js/katex.min.js" defer></script><script src="/js/auto-render.min.js" defer></script><script>document.addEventListener("DOMContentLoaded",(function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})}))</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="container"><div class="row"><div><div class="row"><div class="two columns" style="max-width:50px"><h1 class="mt-2 mode"><div onclick="setDarkMode(!0)" id="darkBtn">üåë</div><div onclick="setDarkMode(!1)" id="lightBtn" class="hidden">‚òÄÔ∏è</div><script>function setDarkMode(e){var t=document.getElementById("darkBtn"),l=document.getElementById("lightBtn");e?(l.style.display="block",t.style.display="none",localStorage.setItem("preferredTheme","dark")):(l.style.display="none",t.style.display="block",localStorage.removeItem("preferredTheme")),document.body.classList.toggle("darkmode")}"dark"==localStorage.getItem("preferredTheme")&&setDarkMode(!0)</script></h1></div><div class="six columns ml-1"><h1 class="mt-2">Hi Folks.</h1></div><div class="twelve columns"><div class="row"><div class="nine columns left"><a href="/">Home</a> <a href="/archives" class="ml">Archives</a> <a href="/About" class="ml">About</a> <a href="mailto:jinzhongjia@qq.com" target="_blank" class="ml">Email</a></div></div><hr style="margin-bottom:2.6rem"></div></div><div class="trans"><h2>Configure Wordpress and Redis in Docker</h2><h2 id="Foreword"><a href="#Foreword" class="headerlink" title="Foreword"></a>Foreword</h2><p>The station has been transferred, and the original 4g small device has been transferred to the current 32g single-use top surface. php+redis+mysql), a caddy under external service. All in allÔºåContainerized incense is complete! üòÄ</p><h2 id="Transfer-plan"><a href="#Transfer-plan" class="headerlink" title="Transfer plan"></a>Transfer plan</h2><p>My transfer plan is very simple, so it‚Äôs a problem, and it‚Äôs finally on the new equipment.</p><p>This job demand blow one down <code>UpdraftPlus-Reward/Recovery</code> This issue has been completed, serious damage, support automatic release of contents to various long-distance service top, comprehensive and unlimited (Amazon S3, Dropbox, Google Cloud hard drive, rackspace, (S) FTP, WebDAV Japanese electronic mail), the calculation is the most powerful data I‚Äôve used in front of me, and the data I‚Äôm talking about is true. Fudo Hashihara Retreat</p><p>This song is ready to use, it‚Äôs just a matter of demand, and it‚Äôs ready for the new environment.</p><h2 id="Environmental-Department"><a href="#Environmental-Department" class="headerlink" title="Environmental Department"></a>Environmental Department</h2><p>Former corporate department plan: Docker containerization (wordpress official image, redis official image, mysql official image)</p><p>Precondition:</p><ul><li>docker</li><li>docker-compose</li></ul><p>Directly use docker-compose unit immediately, the following content:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.1"</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">wordpress</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> wordpress
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> wordpress
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token comment"># This is the end of the movie</span>
            <span class="token punctuation">-</span> 127.0.0.1<span class="token punctuation">:</span>8080<span class="token punctuation">:</span><span class="token number">80</span>
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token key atrule">WORDPRESS_DB_HOST</span><span class="token punctuation">:</span> db
            <span class="token key atrule">WORDPRESS_DB_USER</span><span class="token punctuation">:</span> wpuser
            <span class="token key atrule">WORDPRESS_DB_PASSWORD</span><span class="token punctuation">:</span> wppassword
            <span class="token key atrule">WORDPRESS_DB_NAME</span><span class="token punctuation">:</span> wpdb
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> wordpress<span class="token punctuation">:</span>/var/www/html

    <span class="token key atrule">db</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> wordpress_mysql
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> wpdb
            <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> wpuser
            <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> wppassword
            <span class="token key atrule">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">"1"</span>
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>wp_db<span class="token punctuation">:</span>/var/lib/mysql

    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> wordpress_redis
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> always

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token key atrule">wordpress</span><span class="token punctuation">:</span>
    wp_db<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Use the following commands</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker-compose</span> <span class="token parameter variable">-p</span> wp up <span class="token parameter variable">-d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>After the execution is completed, it will be placed on the opposite side of the agent.</p><p>My web apparel use caddy, specific combination possible, please refer to my previous text, this layout format is as follows:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">https://jinzh.me <span class="token punctuation">&#123;</span>
         tls jinzhongjia@qq.com
<span class="token comment"># Arrangement mail box</span>
         reverse_proxy <span class="token number">127.0</span>.0.1:8080
<span class="token comment">#Placement anti-replacement site</span>
         encode <span class="token function">gzip</span>
<span class="token comment">#opengzip</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>After that, deploy wordpress redis, redis uplink department completed, but not include wordpress image php redsi exhibition, and update wordpress redis information</p><p>For this reason, in the advanced container:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> wordpress <span class="token function">bash</span>
<span class="token comment">#wordpress is container name</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Wordpress container package management usage is apt, first update:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> update
<span class="token function">apt</span> <span class="token function">install</span> <span class="token function">vim</span>
<span class="token comment"># Anso vim</span>
pecl <span class="token function">install</span> redis-5.1.1
<span class="token comment"># Pass through pecl and redis redis</span>
docker-php-ext-enable redis
<span class="token comment"># Opening Exhibition</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Add the following contents to <code>wp-config.php</code>:</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"WP_REDIS_HOST"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"redis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Main machine name (docker container name)</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"WP_REDIS_PORT"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"WP_REDIS_PASSWORD"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"yourpassword"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># Other parameters Reference: https://github.com/rhubarbgroup/redis-cache/wiki/Connection-Parameters</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>The deployment is complete, and the wp has been opened (recommended Redis Object Cache).</p><p><a class="classtest-link" href="/tags/linux/" rel="tag">linux</a>, <a class="classtest-link" href="/tags/play/" rel="tag">play</a> ‚Äî Feb 9, 2023</p></div><div class="row mt-2"><h3>Search</h3><div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div><div style="margin-top:1.5rem"><ul id="result"></ul></div></div><div class="row mt-2"><div class="eight columns"><p id="madewith">Made with ‚ù§ and <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration:none" rel="noreferrer" aria-label="Hexo.io"><svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg> </a>at <a href="https://en.wikipedia.org/wiki/China" target="_blank" rel="noreferrer">China</a>.</p></div><div class="four columns mb-3 posisi"><a class="ml-0 footer-link icon" href="https://github.com/jinzhongjia" target="_blank" style="text-decoration:none" rel="noreferrer" aria-label="GitHub"><svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></div></div></div></div></div><script src="/js/nanobar.min.js"></script><script>var options={classname:"nanobar",id:"myNanobar"},nanobar=new Nanobar(options);nanobar.go(30),nanobar.go(76),nanobar.go(100)</script></body></html>